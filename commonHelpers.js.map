{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["'use strict'\n\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst input = document.querySelector('#datetime-picker');\nconst btnStart = document.querySelector('button[data-start]');\nconst btnStop = document.querySelector('button[data-stop]');\nconst spanDays = document.querySelector('[data-days]');\nconst spanHours = document.querySelector('[data-hours]');\nconst spanMinutes = document.querySelector('[data-minutes]');\nconst spanSeconds = document.querySelector('[data-seconds]');\n\nlet userSelectedDate = 0;\nlet timeDiff = 0;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onChange(selectedDates) {\n        if ((selectedDates[0] - Date.now()) <= 0) {\n            iziToast.destroy();\n            iziToast.show({\n                title: 'Please choose a date in the future',\n                backgroundColor: '#EF4040',\n                timeout: 5000,\n                titleColor: '#fff',\n                titleSize: '16px',\n                iconUrl: '/cross-icon.svg',\n                buttons: [\n                    ['<button style=\"background: transparent; padding: 0; margin-left: 30px\" width=\"20\" height=\"20\"><img src=\"/cross.svg\"></button>', function (instance, toast) {\n                        instance.hide({\n                            transitionOut: 'fadeOutUp',\n                        }, toast, 'buttonName');\n                    }]\n                ],\n                close: false,\n            });\n            btnStart.classList.add('disable');\n        } else {\n            btnStart.classList.remove('disable');\n            iziToast.destroy();\n            userSelectedDate = selectedDates[0].getTime();\n        }\n    },\n  };\n\nconst fp = flatpickr('#datetime-picker', options);\n\nlet id;\n\nbtnStart.addEventListener('click', onbtnStartClick);\n\nfunction onbtnStartClick(e) {\n    if (btnStart.classList.contains('disable')) return;\n    timeDiff = userSelectedDate - Date.now();\n    id = setInterval(timerStart, 1000);\n};\n\nfunction timerStart() {\n    if (timeDiff <= 0) {\n        timerStop();\n        return;\n    }\n    btnStart.classList.add('disable');\n    input.setAttribute('disabled', '');\n    btnStop.classList.remove('disable');\n\n    const { days, hours, minutes, seconds } = convertMs(timeDiff);\n    spanDays.textContent = addLeadingZero(days);\n    spanHours.textContent = addLeadingZero(hours);\n    spanMinutes.textContent = addLeadingZero(minutes);\n    spanSeconds.textContent = addLeadingZero(seconds);\n    timeDiff -= 1000;\n};\n\nbtnStop.addEventListener('click', timerStop);\n\nfunction timerStop() {\n    clearInterval(id);\n    btnStart.classList.remove('disable');\n    input.removeAttribute('disabled');\n    btnStop.classList.add('disable');\n    \n    spanDays.textContent = \n    spanHours.textContent = \n    spanMinutes.textContent = \n    spanSeconds.textContent = '00';\n\n    timeDiff = 0;\n}\n\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds };\n  };\n\nfunction addLeadingZero(value) {\n    return value.toString().padStart(2, '0');\n};\n\n"],"names":["input","btnStart","btnStop","spanDays","spanHours","spanMinutes","spanSeconds","userSelectedDate","timeDiff","options","selectedDates","iziToast","instance","toast","flatpickr","id","onbtnStartClick","e","timerStart","timerStop","days","hours","minutes","seconds","convertMs","addLeadingZero","ms","value"],"mappings":"+IASA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAU,SAAS,cAAc,mBAAmB,EACpDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIC,EAAmB,EACnBC,EAAW,EAEf,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,SAASC,EAAe,CACfA,EAAc,CAAC,EAAI,KAAK,IAAK,GAAK,GACnCC,EAAS,QAAO,EAChBA,EAAS,KAAK,CACV,MAAO,qCACP,gBAAiB,UACjB,QAAS,IACT,WAAY,OACZ,UAAW,OACX,QAAS,kBACT,QAAS,CACL,CAAC,gIAAiI,SAAUC,EAAUC,EAAO,CACzJD,EAAS,KAAK,CACV,cAAe,WAC3C,EAA2BC,EAAO,YAAY,CAC9C,CAAqB,CACJ,EACD,MAAO,EACvB,CAAa,EACDZ,EAAS,UAAU,IAAI,SAAS,IAEhCA,EAAS,UAAU,OAAO,SAAS,EACnCU,EAAS,QAAO,EAChBJ,EAAmBG,EAAc,CAAC,EAAE,QAAO,EAElD,CACL,EAEWI,EAAU,mBAAoBL,CAAO,EAEhD,IAAIM,EAEJd,EAAS,iBAAiB,QAASe,CAAe,EAElD,SAASA,EAAgBC,EAAG,CACpBhB,EAAS,UAAU,SAAS,SAAS,IACzCO,EAAWD,EAAmB,KAAK,MACnCQ,EAAK,YAAYG,EAAY,GAAI,EACrC,CAEA,SAASA,GAAa,CAClB,GAAIV,GAAY,EAAG,CACfW,IACA,MACH,CACDlB,EAAS,UAAU,IAAI,SAAS,EAChCD,EAAM,aAAa,WAAY,EAAE,EACjCE,EAAQ,UAAU,OAAO,SAAS,EAElC,KAAM,CAAE,KAAAkB,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUhB,CAAQ,EAC5DL,EAAS,YAAcsB,EAAeL,CAAI,EAC1ChB,EAAU,YAAcqB,EAAeJ,CAAK,EAC5ChB,EAAY,YAAcoB,EAAeH,CAAO,EAChDhB,EAAY,YAAcmB,EAAeF,CAAO,EAChDf,GAAY,GAChB,CAEAN,EAAQ,iBAAiB,QAASiB,CAAS,EAE3C,SAASA,GAAY,CACjB,cAAcJ,CAAE,EAChBd,EAAS,UAAU,OAAO,SAAS,EACnCD,EAAM,gBAAgB,UAAU,EAChCE,EAAQ,UAAU,IAAI,SAAS,EAE/BC,EAAS,YACTC,EAAU,YACVC,EAAY,YACZC,EAAY,YAAc,KAE1BE,EAAW,CACf,CAEA,SAASgB,EAAUE,EAAI,CAQnB,MAAMN,EAAO,KAAK,MAAMM,EAAK,KAAG,EAE1BL,EAAQ,KAAK,MAAOK,EAAK,MAAO,IAAI,EAEpCJ,EAAU,KAAK,MAAQI,EAAK,MAAO,KAAQ,GAAM,EAEjDH,EAAU,KAAK,MAASG,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAE1C,CACA,SAASE,EAAeE,EAAO,CAC3B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CAC3C"}